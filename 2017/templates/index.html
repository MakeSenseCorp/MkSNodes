<!DOCTYPE html>
<html lang="en">
 
<head>
    <link rel="icon" href="{{ url_for('static', filename='images/node/favicon.ico') }}">
    <title>Master</title>
    <link href="{{ url_for('static', filename='css/vendor/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/node/dashboard.css') }}" rel="stylesheet">
</head>
 
<body>
    <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">MakeSense</a>
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <a class="nav-link" href="#">10:00 AM</a>
            </li>
        </ul>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-2 d-none d-md-block bg-light sidebar">
                <div class="sidebar-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item" onclick="menuSelected(1);">
                            <a class="nav-link" href="#">
                                <span data-feather="crosshair"></span>Applications
                            </a>
                        </li>
                        <li class="nav-item" onclick="menuSelected(2);">
                            <a class="nav-link" href="#">
                                <span data-feather="cpu"></span>Config<span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item" onclick="menuSelected(3);">
                            <a class="nav-link" href="#">
                                <span data-feather="cpu"></span>Thumbnails
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"></div>
                <div class="col-lg-12" style="height: 1000px;">
                    <iframe id="id_context" src="#" style="width: 100%; height: 100%;" frameBorder="0"></iframe>
                </div>
                <footer class="footer"></footer>
            </main>
        </div>
    </div>

    <!-- Icons -->
    <script src="{{ url_for('static', filename='js/vendor/feather.min.js') }}"></script>
    <script>
        feather.replace()
    </script>

    <script src="{{ url_for('static', filename='js/vendor/jquery-3.3.1.min.js') }}"></script>
    <script type="text/javascript">
        var myVar       = "{{ data }}";
        var decodedJSON = $('<div/>').html(myVar).text();
        var jsonData    = $.parseJSON(decodedJSON);

        var GlobalIP    = jsonData.ip;
        var GlobalPort  = jsonData.port;
        var NodeUUID    = jsonData.uuid;

        var menuSelected = function(id) {
            var ui_type     = "";
            var file_type   = "";

            switch(id) {
                case 1:
                    ui_type     = "app";
                    file_type   = "html";
                    break;
                case 2: 
                    ui_type     = "config";
                    file_type   = "html";
                    break;
                case 3: 
                    ui_type     = "thumbnail";
                    file_type   = "html";
                    break;
            }

            api.SendCustomCommand(NodeUUID, "get_file", {
                ui_type: ui_type,
                file_type: file_type,
                file_name: ""
            }, function(res) {
                iframe = document.getElementById("id_context");
                iframe.srcdoc = ConvertHEXtoString(res.data.payload.content);
            });
        }
    </script>
    <script src="{{ url_for('static', filename='mksdk-js/MkSAPI.js') }}"></script>
    <script src="{{ url_for('static', filename='mksdk-js/MkSCommon.js') }}"></script>
    <script src="{{ url_for('static', filename='mksdk-js/MkSGateway.js') }}"></script>
    <script src="{{ url_for('static', filename='mksdk-js/MkSWebface.js') }}"></script>

    <script src="{{ url_for('static', filename='js/vendor/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/node/common.js') }}"></script>
    <script src="{{ url_for('static', filename='js/node/index.js') }}"></script>
</body>
 
</html>